pipeline {
	agent any
	stages{

	   
		stage('build') {
			steps {
				echo 'Building the test'
				bat 'dotnet build WebApplication1.sln --configuration Release"'

			}
		}
		stage('Test') {
			steps {
				echo 'Running tests'
                bat 'dotnet test WebApplication1.sln'
			}
		}
			stage('Publish'){
				steps{
					echo 'Pusblish the WebApplication'
					bat 'dotnet publish WebApplication1.sln'
				}
			}

			stage('Deploy'){
				steps{
					echo 'Deploying the WebApplication'
					bat 'docker build --tag=webapp .'
					bat 'docker run -p 7101:80 --name myapp10 webapp'
					bat 'docker stop myapp10'
					bat 'docker rm myapp10 '
				}
			
			}
			
		
	}
}
